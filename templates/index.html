{% extends "layout.html" %}

{% block title %}
    Journal Entry
{% endblock %}

{% block main %}

<form action="/" method="post">
    <fieldset> <!-- air -->
        <legend>air</legend>
        <div class="mb-3 input-with-text"> <!-- temp -->
            <input autocomplete="off"
                class="form-control"
                name="temp"
                placeholder="temp"
                type="number"
                style="width: 34vw">
            <span>°F</span>
        </div>
        <div class="mb-3 input-with-text"> <!-- wind speed -->
            <input autocomplete="off" 
                class="form-control"
                name="wind_speed"
                placeholder="wind speed"
                type="number"
                style="width: 34vw">
            <span>mph</span>
        </div>
        <div class="mb-3 field-align-left"> <!-- wind direction -->
            <select name="wind_direction" class="form-control">
                <option value="" selected>wind direction ≡</option>
                <option value="E">E</option>
                <option value="ESE">ESE</option>
                <option value="SE">SE</option>
                <option value="SSE">SSE</option>
                <option value="S">S</option>
                <option value="SSW">SSW</option>
                <option value="SW">SW</option>
                <option value="WSW">WSW</option>
                <option value="W">W</option>
                <option value="WNW">WNW</option>
                <option value="NW">NW</option>
                <option value="NNW">NNW</option>
                <option value="N">N</option>
                <option value="NNE">NNE</option>
                <option value="NE">NE</option>
                <option value="ENE">ENE</option>
            </select>
        </div>
        <div class="mb-3"> <!-- air notes -->
            <textarea autocomplete="off" 
                class="form-control auto-expand"
                name="air_notes"
                placeholder="air notes"
                rows="1"></textarea>
        </div>
    </fieldset>

    <fieldset> <!-- water -->
        <legend>water</legend>
        <div class="mb-3" id="sliderRow"> <!-- humidity -->
            <!-- Humidity Toggle -->
            <input type="checkbox" id="humidityVisibleToggle">
            <label for="humidityVisibleToggle" id="humidityLabel" class="sliderLabel">humidity</label>
        
            <!-- Humidity Slider and Value -->
            <div id="humidityContainer" class="sliderContainer" style="display: none;">
                <input type="range" id="humidity" name="humidity" min="0" max="100" value="0" class="slider">
                <span id="humidityValue">0%</span> <!-- Slider Value -->
            </div>         
        </div>
        
        <div class="mb-3" id="sliderRow"> <!-- Cloud Coverage -->
            <!-- Cloud Coverage Toggle -->
            <input type="checkbox" id="cloudVisibleToggle">
            <label for="cloudVisibleToggle" id="cloudCoverageLabel" class="sliderLabel">cloud coverage</label>
        
            <!-- Cloud Coverage Slider and Value -->
            <div id="cloudContainer" class="sliderContainer" style="display: none;">
                <input type="range" id="cloudCoverage" name="cloudCoverage" min="0" max="100" value="0" class="slider">
                <span id="cloudValue">0%</span> <!-- Slider Value -->
            </div>
        </div>
    
        <div class="mb-3 field-align-left"> <!-- cloud speed -->
            <select name="cloud_speed" class="form-control">
                <option value="" selected>cloud speed ≡</option>
                <option value="still">still</option>
                <option value="slow">slow</option>
                <option value="med">med</option>
                <option value="fast">fast</option>
            </select>
        </div>
        <div class="mb-3 field-align-left"> <!-- cloud direction -->
            <select name="cloud_direction" class="form-control">
                <option value="" selected>cloud direction ≡</option>
                <option value="E">E</option>
                <option value="ESE">ESE</option>
                <option value="SE">SE</option>
                <option value="SSE">SSE</option>
                <option value="S">S</option>
                <option value="SSW">SSW</option>
                <option value="SW">SW</option>
                <option value="WSW">WSW</option>
                <option value="W">W</option>
                <option value="WNW">WNW</option>
                <option value="NW">NW</option>
                <option value="NNW">NNW</option>
                <option value="N">N</option>
                <option value="NNE">NNE</option>
                <option value="NE">NE</option>
                <option value="ENE">ENE</option>
            </select>
        </div>
        <div class="mb-3 field-align-left"> <!-- cloud altitude -->
            <select name="cloud_altitude" class="form-control">
                <option value="" selected>cloud altitude ≡</option>
                <option value="low">low</option>
                <option value="med">med</option>
                <option value="high">high</option>
                <option value="very_high">very high</option>
            </select>
        </div>
        <div class="mb-3 field-align-left"> <!-- precipitation -->
            <select name="precipitation" class="form-control">
                <option value="" selected>precipitation ≡</option>
                <option value="fog">fog</option>
                <option value="rain_barely">rain (barely)</option>
                <option value="rain_light">rain (light)</option>
                <option value="rain_moderate">rain (moderate)</option>
                <option value="rain_heavy">rain (heavy)</option>
                <option value="sleet">sleet</option>
                <option value="hail">hail</option>
                <option value="snow_light">snow (light)</option>
                <option value="snow_moderate">snow (moderate)</option>
                <option value="snow_heavy">snow (heavy)</option>
            </select>
        </div>
        <div class="mb-3"> <!-- water notes -->
            <textarea autocomplete="off" 
                class="form-control auto-expand"
                name="water_notes"
                placeholder="water notes"
                rows="1"></textarea>
        </div>
    </fieldset>  
    <fieldset> <!-- moon and bio -->
        <div class="mb-3" id="sliderRow"> <!-- Moon Phase -->
            <!-- moon_phase Toggle -->
            <input type="checkbox" id="moonVisibleToggle">
            <label for="moonVisibleToggle" id="moonLabel" class="sliderLabel">moon</label>
        
            <!-- moon_phase Slider and Value -->
            <div id="moonPhaseContainer" class="sliderContainer" style="display: none;">
                <input type="range" id="moonPhase" name="moonPhase" min="1" max="28" value="1" class="slider">
                <span id="moonPhaseValue">1</span> <!-- Slider Value -->
            </div>
        </div>
        <div class="mb-3"> <!-- bio notes -->
            <textarea autocomplete="off" 
                class="form-control auto-expand"
                name="bio_notes"
                placeholder="bio notes"
                rows="1"></textarea>
        </div>
    </fieldset>
    <button class="btn btn-primary" type="submit">enter</button>
</form>

<!-- JavaScript at the bottom of the body -->
<script> // Auto expand textarea for 'notes' fields
    const textarea = document.querySelector('textarea.auto-expand');
    textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });
</script>
<script> // Humidity Slider Toggle and Value Update
    const humidityVisibleToggle = document.getElementById('humidityVisibleToggle');
    const humidityContainer = document.getElementById('humidityContainer');
    const humiditySlider = document.getElementById('humidity');
    const humidityValue = document.getElementById('humidityValue');

    humidityVisibleToggle.addEventListener('change', function() {
        if (this.checked) {
            humidityLabel.style.display = 'none';
            humidityContainer.style.display = 'inline'; // Adjust to inline for a single line
            humiditySlider.disabled = false;
        } else {
            humidityLabel.style.display = 'inline'; // Show label when unchecked
            humidityContainer.style.display = 'none';
            humiditySlider.disabled = true;
            humiditySlider.value = '0';
            humidityValue.textContent = '0%'; // Reset the value with '%' sign
        }
    });

    humiditySlider.oninput = function() {
        humidityValue.textContent = this.value + '%'; // Update the value with '%' sign
    }
</script>
<script> // Cloud Coverage Slider Toggle and Value Update
    const cloudVisibleToggle = document.getElementById('cloudVisibleToggle');
    const cloudContainer = document.getElementById('cloudContainer');
    const cloudCoverageSlider = document.getElementById('cloudCoverage');
    const cloudValue = document.getElementById('cloudValue');

    cloudVisibleToggle.addEventListener('change', function() {
        if (this.checked) {
            cloudCoverageLabel.style.display = 'none';
            cloudContainer.style.display = 'inline'; // Adjust to inline for a single line
            cloudCoverageSlider.disabled = false;
        } else {
            cloudCoverageLabel.style.display = 'inline'; // Show label when unchecked
            cloudContainer.style.display = 'none';
            cloudCoverageSlider.disabled = true;
            cloudCoverageSlider.value = '0';
            cloudValue.textContent = '0%'; // Reset the value with '%' sign
        }
    });

    cloudCoverageSlider.oninput = function() {
        cloudValue.textContent = this.value + '%'; // Update the value with '%' sign
    }
</script>
<script> // // Moon Phase Slider Toggle and Value Update
    const moonVisibleToggle = document.getElementById('moonVisibleToggle');
    const moonPhaseContainer = document.getElementById('moonPhaseContainer');
    const moonPhaseSlider = document.getElementById('moonPhase');
    const moonPhaseValue = document.getElementById('moonPhaseValue');

    moonVisibleToggle.addEventListener('change', function() {
        if (this.checked) {
            moonLabel.style.display = 'none';
            moonPhaseContainer.style.display = 'inline'; // Adjust to inline for a single line
            moonPhaseSlider.disabled = false;
        } else {
            moonLabel.style.display = 'inline'; // Show label when unchecked
            moonPhaseContainer.style.display = 'none';
            moonPhaseSlider.disabled = true;
            moonPhaseSlider.value = '1';
    }
    });

    moonPhaseSlider.oninput = function() {
        moonPhaseValue.textContent = this.value;
    }

</script>


{% endblock %}
